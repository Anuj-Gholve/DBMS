-- Create Tables
CREATE TABLE Company (
    company_name VARCHAR(50) PRIMARY KEY,
    city VARCHAR(50) NOT NULL
);

CREATE TABLE Employee (
    emp_id INT PRIMARY KEY,
    employee_name VARCHAR(50) NOT NULL,
    street VARCHAR(100),
    city VARCHAR(50)
);

CREATE TABLE Works (
    employee_name VARCHAR(50),
    company_name VARCHAR(50),
    salary DECIMAL(12,2),
    PRIMARY KEY (employee_name, company_name),
    FOREIGN KEY (employee_name) REFERENCES Employee(employee_name),
    FOREIGN KEY (company_name) REFERENCES Company(company_name)
);

CREATE TABLE Manages (
    employee_name VARCHAR(50),
    manager_name VARCHAR(50),
    PRIMARY KEY (employee_name, manager_name),
    FOREIGN KEY (employee_name) REFERENCES Employee(employee_name),
    FOREIGN KEY (manager_name) REFERENCES Employee(employee_name)
);

-- Insert Sample Data
INSERT INTO Company VALUES
('TCS', 'Pune'),
('InfoSys', 'Hyderabad'),
('TechM', 'Mumbai'),
('Wipro', 'Chennai');

INSERT INTO Employee VALUES
(101, 'Anuj', 'MG Road', 'Pune'),
(102, 'Riya', 'FC Road', 'Hyderabad'),
(103, 'Amit', 'JM Road', 'Mumbai'),
(104, 'Sara', 'Baner', 'Pune'),
(105, 'Karan', 'Laxmi Road', 'Chennai');

INSERT INTO Works VALUES
('Anuj', 'TCS', 12000),
('Riya', 'InfoSys', 9500),
('Amit', 'TechM', 15000),
('Sara', 'TCS', 13000),
('Karan', 'Wipro', 11000);

INSERT INTO Manages VALUES
('Anuj', 'Sara'),
('Riya', 'Karan'),
('Amit', 'Anuj'),
('Sara', 'Amit');

-- Queries

-- 1. Find the names of all employees who work for 'TCS'
SELECT employee_name
FROM Works
WHERE company_name = 'TCS';

-- 2. Find names and company names of all employees sorted by company (ASC) and employee name (DESC)
SELECT employee_name, company_name
FROM Works
ORDER BY company_name ASC, employee_name DESC;

-- 3. Change the city of employee working with 'InfoSys' to 'Bangalore'
UPDATE Employee
SET city = 'Bangalore'
WHERE employee_name IN (
    SELECT employee_name FROM Works WHERE company_name = 'InfoSys'
);

-- 4. Find names, street, and cities of employees who work for 'TechM' and earn > 10000
SELECT e.employee_name, e.street, e.city
FROM Employee e
JOIN Works w ON e.employee_name = w.employee_name
WHERE w.company_name = 'TechM' AND w.salary > 10000;

-- 5. Add column 'Asset' to Company table
ALTER TABLE Company ADD COLUMN Asset DECIMAL(15,2);
